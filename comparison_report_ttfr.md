# GPT-5.2-Codex 推理级别对比测试报告（含 TTFR）

**测试日期**: 2026年1月29日  
**模型**: gpt-5.2-codex  
**API端点**: Azure OpenAI (codex-cli-azure-resource)  
**测试模式**: Streaming  
**推理摘要**: detailed（启用 TTFR 统计）  
**缓存设置**: 禁用 (no_cache: true)  
**每级别测试次数**: 3 次  
**测试提示词**: "生成一个日历应用的代码示例，使用 Python 和 Tkinter 库。"

---

## 📊 测试结果汇总

| 指标 | Low | Medium | High |
| ------ | ------ | -------- | ------ |
| **平均延迟 (ms)** | 24,809.92 | 30,930.70 | 63,951.99 |
| **延迟标准差 (ms)** | 10,706.09 | 7,856.58 | 28,003.41 |
| **平均 TTFR (ms)** | 9,654.21 | 9,447.69 | 48,123.59* |
| **TTFR 标准差 (ms)** | 1,975.62 | 698.98 | 0.00* |
| **平均 TTFT (ms)** | 10,678.09 | 11,177.70 | 36,265.76 |
| **TTFT 标准差 (ms)** | 2,038.96 | 616.15 | 27,467.72 |
| **平均输出 Tokens** | 379 | 602 | 1,202 |
| **平均 TPS (tokens/s)** | 30.69 | 31.51 | 43.29 |
| **TTFR 有效率** | 3/3 (100%) | 2/3 (67%) | 1/3 (33%) |
| **请求状态** | ✅ 3/3 成功 | ✅ 3/3 成功 | ✅ 3/3 成功 |

> *High 模式仅 1 次返回 TTFR，统计数据代表单次结果

---

## 🧠 TTFR（首推理摘要时间）分析

### 什么是 TTFR

**TTFR (Time To First Reasoning)** 是首个推理摘要 delta 事件返回的时间，反映模型开始输出推理摘要的延迟。

- **测量事件**: `response.reasoning_summary_text.delta`
- **前提条件**: 必须启用 `reasoning_summary: "detailed"` 或 `"auto"`
- **关系**: 通常 TTFR < TTFT（推理摘要先于最终内容返回）

### TTFR vs TTFT 对比

```text
Low:
  TTFR: ████████████████████████████████████████                 9,654 ms
  TTFT: ██████████████████████████████████████████████           10,678 ms
  差值: TTFR 比 TTFT 快 1,024 ms (9.6%)

Medium:
  TTFR: ████████████████████████████████████████                 9,448 ms
  TTFT: ██████████████████████████████████████████████           11,178 ms
  差值: TTFR 比 TTFT 快 1,730 ms (15.5%)

High:
  TTFR: ████████████████████████████████████████████████████████ 48,124 ms
  TTFT: ██████████████████████████████████████████               36,266 ms
  差值: TTFR 比 TTFT 慢 11,858 ms (异常)
```

**分析**:
- **Low/Medium 模式**: TTFR 始终早于 TTFT，符合预期（先推理后输出）
- **High 模式**: TTFR 有效返回率低（33%），且偶发 TTFR > TTFT 的异常情况
- **可能原因**: High 模式推理复杂度高，摘要生成可能延后于部分输出内容

### TTFR 有效返回率

| 推理深度 | 返回次数 | 有效率 | 说明 |
| -------- | -------- | ------ | ---- |
| Low | 3/3 | 100% | 稳定返回 |
| Medium | 2/3 | 67% | 偶尔缺失 |
| High | 1/3 | 33% | 经常缺失 |

**结论**: 推理深度越高，TTFR 返回率越低

---

## 📈 性能对比分析

### 1. 总延迟 (Latency)

```text
Low:    ██████████████████████████████████████                         24,810 ms (最快)
Medium: ████████████████████████████████████████████████               30,931 ms
High:   ████████████████████████████████████████████████████████████████ 63,952 ms (最慢)
```

**分析**:
- **Low** 模式平均延迟最短（24.81秒），比 High 快 **61.2%**
- **Medium** 模式延迟 30.93 秒，比 High 快 **51.6%**

### 2. 首Token延迟 (TTFT)

```text
Low:    ████████████████████████████████                               10,678 ms (最快)
Medium: ██████████████████████████████████                             11,178 ms
High:   ██████████████████████████████████████████████████████████████ 36,266 ms (最慢)
```

**分析**:
- **Low/Medium** 模式 TTFT 相近（10.7s vs 11.2s）
- **High** 模式 TTFT 显著偏高（36.27秒），约为 Low 的 **3.4倍**

### 3. 输出 Token 数量

```text
Low:    █████████████████████████████████                              379 tokens
Medium: ██████████████████████████████████████████████████             602 tokens
High:   ██████████████████████████████████████████████████████████████ 1,202 tokens (最多)
```

**分析**:
- **High** 模式输出最丰富（1,202 tokens），约为 **Low** 的 **3.17倍**
- **Medium** 模式输出 602 tokens，约为 Low 的 **1.59倍**

### 4. Token 生成速度 (TPS)

```text
High:   ██████████████████████████████████████████████████████████████ 43.29 tokens/s (最快)
Medium: ████████████████████████████████████████████████               31.51 tokens/s
Low:    ██████████████████████████████████████████████                 30.69 tokens/s
```

**分析**:
- **High** 模式 TPS 最高（43.29），比 Low/Medium 快 **41%**
- Low/Medium 模式 TPS 相近（~31 tokens/s）

---

## 🔍 稳定性分析

| 指标 | Low | Medium | High |
| ------ | ------ | -------- | ------ |
| 延迟标准差 (ms) | 10,706.09 | 7,856.58 | 28,003.41 |
| 延迟变异系数 | 43.2% | 25.4% | 43.8% |
| TTFT 标准差 (ms) | 2,038.96 | 616.15 | 27,467.72 |
| TTFT 变异系数 | 19.1% | 5.5% | 75.7% |
| TTFR 标准差 (ms) | 1,975.62 | 698.98 | 0.00* |
| TTFR 变异系数 | 20.5% | 7.4% | N/A |

**分析**:
- **Medium** 模式在 TTFT 和 TTFR 上稳定性最高（变异系数最低）
- **High** 模式 TTFT 波动极大（变异系数 75.7%）
- **Low** 模式整体稳定性居中

---

## 📋 详细测试数据

### Low 级别（3次测试）

| 序号 | 延迟(ms) | TTFR(ms) | TTFT(ms) | 输出Tokens | TPS |
| ---- | -------- | -------- | -------- | ---------- | --- |
| 1 | 24,765.18 | 10,728.35 | 12,024.09 | 396 | 31.08 |
| 2 | 14,126.27 | 7,374.23 | 8,332.20 | 229 | 39.52 |
| 3 | 35,538.31 | 10,860.05 | 11,677.97 | 512 | 21.46 |

### Medium 级别（3次测试）

| 序号 | 延迟(ms) | TTFR(ms) | TTFT(ms) | 输出Tokens | TPS |
| ---- | -------- | -------- | -------- | ---------- | --- |
| 1 | 33,575.73 | 9,941.95 | 11,082.06 | 650 | 28.90 |
| 2 | 22,092.95 | 8,953.44 | 10,614.96 | 418 | 36.42 |
| 3 | 37,123.41 | - | 11,836.08 | 739 | 29.22 |

### High 级别（3次测试）

| 序号 | 延迟(ms) | TTFR(ms) | TTFT(ms) | 输出Tokens | TPS |
| ---- | -------- | -------- | -------- | ---------- | --- |
| 1 | 61,422.09 | - | 32,833.59 | 1,026 | 35.89 |
| 2 | 37,299.37 | - | 10,675.43 | 814 | 30.57 |
| 3 | 93,134.51 | 48,123.59 | 65,288.27 | 1,766 | 63.42 |

---

## 🎯 场景推荐

| 场景 | 推荐级别 | 原因 |
| ------ | ---------- | ------ |
| ⚡ 快速原型/简单任务 | **Low** | 延迟最短（24.8s），TTFR 100% 有效 |
| 🎯 生产代码/复杂逻辑 | **High** | 输出最完整（1,202 tokens），TPS 最高 |
| ⚖️ 平衡速度与稳定性 | **Medium** | TTFT/TTFR 变异系数最低，性能稳定 |
| 📊 需要 TTFR 监控 | **Low** | TTFR 返回率 100%，数据完整 |

---

## 💡 关键发现

### ✅ TTFR 成功统计
- 通过监听 `response.reasoning_summary_text.delta` 事件成功获取 TTFR
- Low/Medium 模式下 TTFR 始终早于 TTFT，验证了"先推理后输出"的预期

### ✅ TTFR 返回率与推理深度负相关
- Low: 100% → Medium: 67% → High: 33%
- 推理深度越高，摘要事件越不稳定

### ✅ 性能特征总结
- **Low**: 最快响应 + 最稳定 TTFR + 较少输出
- **Medium**: 平衡选择 + 最稳定 TTFT + 中等输出
- **High**: 最多输出 + 最高 TPS + 最大波动

---

## 📋 总结

| 排名 | 最快响应 | 最多输出 | 最高TPS | 最稳定TTFR |
| ------ | --------- | --------- | --------- | ---------- |
| 🥇 | Low (24.8s) | High (1,202) | High (43.29) | Low (100%) |
| 🥈 | Medium (30.9s) | Medium (602) | Medium (31.51) | Medium (67%) |
| 🥉 | High (64.0s) | Low (379) | Low (30.69) | High (33%) |

---

## ⚠️ 备注

- 测试在相同网络环境下进行，结果可能因网络波动有所不同
- TTFR 依赖 `reasoning_summary` 参数，需设置为 `"auto"` 或 `"detailed"`
- High 模式下 TTFR 返回不稳定，建议 Low/Medium 模式用于 TTFR 监控场景
- 推理强度设置影响模型的计算资源使用，可能影响成本

---

*报告生成时间: 2026年1月29日*  
*测试工具: LLMtest*
